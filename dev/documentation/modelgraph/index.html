<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>ModelGraph · Plasmo.jl - Platform for Scalable Modeling and Optimization</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link href="../../assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>Plasmo.jl - Platform for Scalable Modeling and Optimization</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="../../search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../../">Introduction</a></li><li><a class="toctext" href="../../quick_start/quickstart/">Quick Start</a></li><li class="current"><a class="toctext" href>ModelGraph</a><ul class="internal"><li><a class="toctext" href="#Constructor-1">Constructor</a></li><li><a class="toctext" href="#Adding-Nodes-1">Adding Nodes</a></li><li><a class="toctext" href="#Adding-Link-Constraints-1">Adding Link-Constraints</a></li><li><a class="toctext" href="#Subgraph-Structures-1">Subgraph Structures</a></li><li><a class="toctext" href="#Methods-1">Methods</a></li></ul></li><li><a class="toctext" href="../graphanalysis/">Graph Analysis</a></li><li><a class="toctext" href="../solvers/solvers/">Solvers</a></li><li><a class="toctext" href="../../tutorials/tutorials/">Tutorials</a></li><li><a class="toctext" href="../../low_level/baseplasmograph/">Low-Level Functions</a></li></ul></nav><article id="docs"><header><nav><ul><li><a href>ModelGraph</a></li></ul><a class="edit-page" href="https://github.com/jalving/Plasmo.jl/blob/master/docs/src/documentation/modelgraph.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>ModelGraph</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="ModelGraph-1" href="#ModelGraph-1">ModelGraph</a></h1><h2><a class="nav-anchor" id="Constructor-1" href="#Constructor-1">Constructor</a></h2><p>The <code>ModelGraph</code> is the primary object for creating graph-based models in Plasmo.jl.  A <code>ModelGraph</code> is a collection of <code>ModelNode</code>s which are connected by means of <code>LinkingEdge</code>s (link constraints) over variables.  One way to think of the structure of a <code>ModelGraph</code> is a HyperGraph wherein edges represent linking constraints that can link multiple <code>ModelNode</code> variables.</p><p>A <code>ModelGraph</code> does not require any arguments to construct:</p><pre><code class="language-julia">mg = ModelGraph()</code></pre><p>A <code>ModelGraph</code> solver can be specified upon construction using the <code>solver</code> keyword argument.  A <code>solver</code> can be any JuMP compatible solver or a Plasmo provided solver (see solvers section).   For example, we could construct a <code>ModelGraph</code> that starts with the <code>IpoptSolver</code> from the Ipopt package:</p><pre><code class="language-julia">mg = ModelGraph(solver = IpoptSolver())</code></pre><h2><a class="nav-anchor" id="Adding-Nodes-1" href="#Adding-Nodes-1">Adding Nodes</a></h2><p>Nodes can be added to a <code>ModelGraph</code> using the <code>add_node!</code> function.  By default, a node contains an empty JuMP <code>Model</code> object.</p><pre><code class="language-julia">n1 = add_node!(mg)</code></pre><p>A model can be set upon creation by providing a second argument.  For example:</p><pre><code class="language-julia">model = JuMP.Model()
n1 = add_node!(mg,model)</code></pre><p>where <code>model</code> is a JuMP <code>Model</code> object.  We can also set a model on a node after construction:</p><pre><code class="language-julia">setmodel(n1,model)</code></pre><p>This can be helpful in instances where a user wants to swap out a model on a node without changing the graph topology.  Keep in mind however that swapping out a model will by default remove any link-constraints that involve that node.</p><p>We can also iterate over the nodes in a <code>ModelGraph</code> using the <code>getnodes</code> function.  For example</p><pre><code class="language-julia">for node in getnodes(mg)
    println(node)
end</code></pre><p>will print the string for every node in the <code>ModelGraph</code> mg.  </p><p><code>ModelNode</code>s can also be retrieved based on their index, or a node index can be found within a <code>ModelGraph</code>.   For example, since n1 was the first node added to mg, it will have an index of 1.</p><pre><code class="language-julia">n1 = getnode(mg,1)
getindex(mg,n1) == 1  #will return true</code></pre><p>Variables within a JuMP <code>Model</code> can be accessed directly from their enclosing node.  </p><pre><code class="language-julia">jump_model = Model()
@variable(jump_model,x &gt;= 0)
setmodel(n1,jump_model)
println(n1[:x])  </code></pre><h2><a class="nav-anchor" id="Adding-Link-Constraints-1" href="#Adding-Link-Constraints-1">Adding Link-Constraints</a></h2><p>Link constraints are linear constraints that couple variables across different <code>ModelNode</code>s.  The simplist way to add link-constraints is to use the <code>@linkconstraint</code> macro.  This macro accepts the same input as a JuMP <code>@constraint</code> macro, except it handles linear constraints over multiple nodes within the same graph.</p><pre><code class="language-julia">jump_2 = Model()
@variable(jump_2,x &gt;= 0)
n2 = add_node!(mg,jump_2)

@linkconstraint(mg,n1[:x] == n2[:x])</code></pre><h2><a class="nav-anchor" id="Subgraph-Structures-1" href="#Subgraph-Structures-1">Subgraph Structures</a></h2><p>Finally, it is possible to create subgraphs within a <code>ModelGraph</code> object.  This is helpful when a user wants to develop to separate systems and link them together within a higher level graph.</p><h2><a class="nav-anchor" id="Methods-1" href="#Methods-1">Methods</a></h2><h3><a class="nav-anchor" id="ModelGraph-2" href="#ModelGraph-2">ModelGraph</a></h3><p>The <code>ModelGraph</code> contains the following useful methods:</p><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Plasmo.PlasmoModelGraph.ModelGraph" href="#Plasmo.PlasmoModelGraph.ModelGraph"><code>Plasmo.PlasmoModelGraph.ModelGraph</code></a> — <span class="docstring-category">Type</span>.</div><div><div><p>ModelGraph()</p><p>The ModelGraph Type.  Represents a graph containing models (nodes) and the linkconstraints (edges) between them. A ModelGraph wraps a BasePlasmoGraph and can use its methods.  A ModelGraph also wraps a LinkModel object which extends a JuMP AbstractModel to provide model management functions.</p></div></div><a class="source-link" target="_blank" href="https://github.com/jalving/Plasmo.jl/blob/f22bbb70a4e34b3c2f36b9ee26a08bbca30575ba/src/ModelGraph/modelgraph.jl#L10-L16">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="JuMP.getobjectivevalue" href="#JuMP.getobjectivevalue"><code>JuMP.getobjectivevalue</code></a> — <span class="docstring-category">Function</span>.</div><div><div><p>Get the ModelGraph objective value</p></div></div><a class="source-link" target="_blank" href="https://github.com/jalving/Plasmo.jl/blob/f22bbb70a4e34b3c2f36b9ee26a08bbca30575ba/src/ModelGraph/modelgraph.jl#L33">source</a><div><div><p>Get node objective value</p></div></div><a class="source-link" target="_blank" href="https://github.com/jalving/Plasmo.jl/blob/f22bbb70a4e34b3c2f36b9ee26a08bbca30575ba/src/ModelGraph/modelnode.jl#L51">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Plasmo.PlasmoModelGraph.getinternaljumpmodel" href="#Plasmo.PlasmoModelGraph.getinternaljumpmodel"><code>Plasmo.PlasmoModelGraph.getinternaljumpmodel</code></a> — <span class="docstring-category">Function</span>.</div><div><div><p>Get the current created JuMP model for the ModelGraph.  Only created when solving using a JuMP compliant solver.</p></div></div><a class="source-link" target="_blank" href="https://github.com/jalving/Plasmo.jl/blob/f22bbb70a4e34b3c2f36b9ee26a08bbca30575ba/src/ModelGraph/modelgraph.jl#L36">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="JuMP.setsolver-Tuple{AbstractModelGraph,MathProgBase.SolverInterface.AbstractMathProgSolver}" href="#JuMP.setsolver-Tuple{AbstractModelGraph,MathProgBase.SolverInterface.AbstractMathProgSolver}"><code>JuMP.setsolver</code></a> — <span class="docstring-category">Method</span>.</div><div><div><p>setsolver(model::AbstractModelGraph,solver::AbstractMathProgSolver)</p><p>Set the graph solver to use an AbstractMathProg compliant solver</p></div></div><a class="source-link" target="_blank" href="https://github.com/jalving/Plasmo.jl/blob/f22bbb70a4e34b3c2f36b9ee26a08bbca30575ba/src/ModelGraph/modelgraph.jl#L43-L47">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="JuMP.setsolver-Tuple{AbstractModelGraph,AbstractPlasmoSolver}" href="#JuMP.setsolver-Tuple{AbstractModelGraph,AbstractPlasmoSolver}"><code>JuMP.setsolver</code></a> — <span class="docstring-category">Method</span>.</div><div><div><p>setsolver(model::AbstractModelGraph,solver::AbstractPlasmoSolver)</p><p>Set the graph solver to use an AbstractMathProg compliant solver</p></div></div><a class="source-link" target="_blank" href="https://github.com/jalving/Plasmo.jl/blob/f22bbb70a4e34b3c2f36b9ee26a08bbca30575ba/src/ModelGraph/modelgraph.jl#L50-L54">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Plasmo.PlasmoModelGraph.getsolver" href="#Plasmo.PlasmoModelGraph.getsolver"><code>Plasmo.PlasmoModelGraph.getsolver</code></a> — <span class="docstring-category">Function</span>.</div><div><div><p>Get the ModelGraph solver</p></div></div><a class="source-link" target="_blank" href="https://github.com/jalving/Plasmo.jl/blob/f22bbb70a4e34b3c2f36b9ee26a08bbca30575ba/src/ModelGraph/modelgraph.jl#L57">source</a></section><h3><a class="nav-anchor" id="ModelNode-1" href="#ModelNode-1">ModelNode</a></h3><p><code>ModelNode</code>s contain methods for managing their contained JuMP models.</p><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Plasmo.PlasmoModelGraph.ModelNode" href="#Plasmo.PlasmoModelGraph.ModelNode"><code>Plasmo.PlasmoModelGraph.ModelNode</code></a> — <span class="docstring-category">Type</span>.</div><div><div><p>The ModelNode type</p><p>ModelNode()</p><p>Creates an empty ModelNode.  Does not add it to a graph.</p></div></div><a class="source-link" target="_blank" href="https://github.com/jalving/Plasmo.jl/blob/f22bbb70a4e34b3c2f36b9ee26a08bbca30575ba/src/ModelGraph/modelnode.jl#L6-L12">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Plasmo.PlasmoGraphBase.add_node!-Tuple{AbstractModelGraph,JuMP.AbstractModel}" href="#Plasmo.PlasmoGraphBase.add_node!-Tuple{AbstractModelGraph,JuMP.AbstractModel}"><code>Plasmo.PlasmoGraphBase.add_node!</code></a> — <span class="docstring-category">Method</span>.</div><div><div><p>add_node!(graph::AbstractModelGraph)</p><p>Add a ModelNode to a ModelGraph.</p></div></div><a class="source-link" target="_blank" href="https://github.com/jalving/Plasmo.jl/blob/f22bbb70a4e34b3c2f36b9ee26a08bbca30575ba/src/ModelGraph/modelnode.jl#L23-L27">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Plasmo.PlasmoModelGraph.setmodel-Tuple{ModelNode,JuMP.AbstractModel}" href="#Plasmo.PlasmoModelGraph.setmodel-Tuple{ModelNode,JuMP.AbstractModel}"><code>Plasmo.PlasmoModelGraph.setmodel</code></a> — <span class="docstring-category">Method</span>.</div><div><div><p>setmodel(node::ModelNode,m::AbstractModel)</p><p>Set the model on a node.  This will delete any link-constraints the node is currently part of</p></div></div><a class="source-link" target="_blank" href="https://github.com/jalving/Plasmo.jl/blob/f22bbb70a4e34b3c2f36b9ee26a08bbca30575ba/src/ModelGraph/modelnode.jl#L118-L122">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Plasmo.PlasmoModelGraph.is_nodevar" href="#Plasmo.PlasmoModelGraph.is_nodevar"><code>Plasmo.PlasmoModelGraph.is_nodevar</code></a> — <span class="docstring-category">Function</span>.</div><div><div><p>is_nodevar(node::ModelNode,var::AbstractJuMPScalar)</p><p>Check whether a JuMP variable belongs to a ModelNode</p></div></div><a class="source-link" target="_blank" href="https://github.com/jalving/Plasmo.jl/blob/f22bbb70a4e34b3c2f36b9ee26a08bbca30575ba/src/ModelGraph/modelnode.jl#L92-L96">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Plasmo.PlasmoGraphBase.getnode-Tuple{JuMP.AbstractModel}" href="#Plasmo.PlasmoGraphBase.getnode-Tuple{JuMP.AbstractModel}"><code>Plasmo.PlasmoGraphBase.getnode</code></a> — <span class="docstring-category">Method</span>.</div><div><div><p>getnode(model::AbstractModel)</p><p>Get the ModelNode corresponding to a JuMP Model</p></div></div><a class="source-link" target="_blank" href="https://github.com/jalving/Plasmo.jl/blob/f22bbb70a4e34b3c2f36b9ee26a08bbca30575ba/src/ModelGraph/modelnode.jl#L104-L108">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Plasmo.PlasmoGraphBase.getnode-Tuple{JuMP.AbstractJuMPScalar}" href="#Plasmo.PlasmoGraphBase.getnode-Tuple{JuMP.AbstractJuMPScalar}"><code>Plasmo.PlasmoGraphBase.getnode</code></a> — <span class="docstring-category">Method</span>.</div><div><div><p>getnode(model::AbstractModel)</p><p>Get the ModelNode corresponding to a JuMP Variable</p></div></div><a class="source-link" target="_blank" href="https://github.com/jalving/Plasmo.jl/blob/f22bbb70a4e34b3c2f36b9ee26a08bbca30575ba/src/ModelGraph/modelnode.jl#L111-L115">source</a></section><h3><a class="nav-anchor" id="LinkConstraints-1" href="#LinkConstraints-1">LinkConstraints</a></h3><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Plasmo.PlasmoModelGraph.getlinkconstraints-Tuple{AbstractModelGraph}" href="#Plasmo.PlasmoModelGraph.getlinkconstraints-Tuple{AbstractModelGraph}"><code>Plasmo.PlasmoModelGraph.getlinkconstraints</code></a> — <span class="docstring-category">Method</span>.</div><div><div><p>getlinkconstraints(graph::AbstractModelGraph)</p><p>Return Array of all LinkConstraints in the ModelGraph graph</p></div></div><a class="source-link" target="_blank" href="https://github.com/jalving/Plasmo.jl/blob/f22bbb70a4e34b3c2f36b9ee26a08bbca30575ba/src/ModelGraph/modelgraph.jl#L93-L97">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Plasmo.PlasmoModelGraph.getsimplelinkconstraints" href="#Plasmo.PlasmoModelGraph.getsimplelinkconstraints"><code>Plasmo.PlasmoModelGraph.getsimplelinkconstraints</code></a> — <span class="docstring-category">Function</span>.</div><div><div><p>getsimplelinkconstraints(model::AbstractModelGraph)</p><p>Retrieve link-constraints that only connect two nodes&quot;</p></div></div><a class="source-link" target="_blank" href="https://github.com/jalving/Plasmo.jl/blob/f22bbb70a4e34b3c2f36b9ee26a08bbca30575ba/src/ModelGraph/modelgraph.jl#L100-L104">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Plasmo.PlasmoModelGraph.gethyperlinkconstraints" href="#Plasmo.PlasmoModelGraph.gethyperlinkconstraints"><code>Plasmo.PlasmoModelGraph.gethyperlinkconstraints</code></a> — <span class="docstring-category">Function</span>.</div><div><div><p>gethyperlinkconstraints(model::AbstractModelGraph)</p><p>Retrieve link-constraints that connect three or more nodes&quot;</p></div></div><a class="source-link" target="_blank" href="https://github.com/jalving/Plasmo.jl/blob/f22bbb70a4e34b3c2f36b9ee26a08bbca30575ba/src/ModelGraph/modelgraph.jl#L108-L112">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Plasmo.PlasmoModelGraph.get_all_linkconstraints" href="#Plasmo.PlasmoModelGraph.get_all_linkconstraints"><code>Plasmo.PlasmoModelGraph.get_all_linkconstraints</code></a> — <span class="docstring-category">Function</span>.</div><div><div><p>get<em>all</em>linkconstraints(graph::AbstractModelGraph)</p><p>Get a list containing every link constraint in the graph, including its subgraphs</p></div></div><a class="source-link" target="_blank" href="https://github.com/jalving/Plasmo.jl/blob/f22bbb70a4e34b3c2f36b9ee26a08bbca30575ba/src/ModelGraph/modelgraph.jl#L115-L119">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Plasmo.PlasmoModelGraph.addlinkconstraint" href="#Plasmo.PlasmoModelGraph.addlinkconstraint"><code>Plasmo.PlasmoModelGraph.addlinkconstraint</code></a> — <span class="docstring-category">Function</span>.</div><div><div><p>Add a single link-constraint to the ModelGraph</p></div></div><a class="source-link" target="_blank" href="https://github.com/jalving/Plasmo.jl/blob/f22bbb70a4e34b3c2f36b9ee26a08bbca30575ba/src/ModelGraph/modelgraph.jl#L64">source</a><div><div><p>Add a vector of link-constraints to the ModelGraph</p></div></div><a class="source-link" target="_blank" href="https://github.com/jalving/Plasmo.jl/blob/f22bbb70a4e34b3c2f36b9ee26a08bbca30575ba/src/ModelGraph/modelgraph.jl#L73">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Plasmo.PlasmoModelGraph.getlinkconstraints-Tuple{AbstractModelGraph,ModelNode}" href="#Plasmo.PlasmoModelGraph.getlinkconstraints-Tuple{AbstractModelGraph,ModelNode}"><code>Plasmo.PlasmoModelGraph.getlinkconstraints</code></a> — <span class="docstring-category">Method</span>.</div><div><div><p>getlinkconstraints(graph::AbstractModelGraph,node::ModelNode)</p><p>Return Array of LinkConstraints for the node</p></div></div><a class="source-link" target="_blank" href="https://github.com/jalving/Plasmo.jl/blob/f22bbb70a4e34b3c2f36b9ee26a08bbca30575ba/src/ModelGraph/modelnode.jl#L76-L80">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Plasmo.PlasmoModelGraph.getlinkconstraints-Tuple{ModelNode}" href="#Plasmo.PlasmoModelGraph.getlinkconstraints-Tuple{ModelNode}"><code>Plasmo.PlasmoModelGraph.getlinkconstraints</code></a> — <span class="docstring-category">Method</span>.</div><div><div><p>getlinkconstraints(node::ModelNode)</p><p>Return a Dictionary of LinkConstraints for each graph the node is a member of</p></div></div><a class="source-link" target="_blank" href="https://github.com/jalving/Plasmo.jl/blob/f22bbb70a4e34b3c2f36b9ee26a08bbca30575ba/src/ModelGraph/modelnode.jl#L60-L64">source</a></section><footer><hr/><a class="previous" href="../../quick_start/quickstart/"><span class="direction">Previous</span><span class="title">Quick Start</span></a><a class="next" href="../graphanalysis/"><span class="direction">Next</span><span class="title">Graph Analysis</span></a></footer></article></body></html>
